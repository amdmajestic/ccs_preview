var w=Object.defineProperty;var E=(u,l,t)=>l in u?w(u,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[l]=t;var d=(u,l,t)=>E(u,typeof l!="symbol"?l+"":l,t);import{u as P,r as j,j as e,b as C,R as L,a as N,c as v}from"./index-YDo22WNU.js";function F(){const l=P().id,[t,s]=j.useState(null),[a,o]=j.useState(!0);async function n(){try{const k=(await N.get("/course_allocation/instructors/")).data.filter(S=>Number(S.user.id)===Number(l));s(k.pop())}catch(g){throw new Error("Error fetching data:",g)}finally{o(!1)}}if(j.useEffect(()=>{n()},[l]),a)return e.jsx(C.SuspenseLoader,{});const{profile_picture:f,user:m={name:"Default Name",email:"No Email Provided"},bio:p,gender:c,expertise:h,degree:y,teaching_experience:b,is_visiting:x,time_slots:r,course_preferences:i}=t??{};return e.jsx(R,{instructorId:l,profilePicture:f,name:m.name,email:m.email,bio:p,selectedCourses:i,gender:c,expertise:h,degree:y,teachingExperience:b,isVisiting:x,timeSlots:r})}class R extends j.Component{constructor(t){super(t);d(this,"fetchCoursesList",async()=>{this.setState({loadingCourses:!0}),await N.get("/course_allocation/courses/").then(t=>{this.setState({courseList:t.data,loadingCourses:!1})}).catch(()=>{this.setState({errorLoadingCourses:!0,loadingCourses:!1})})});d(this,"handleSubmit",async t=>{const{profilePicture:s,name:a,email:o,bio:n,selectedCourses:f,gender:m,expertise:p,degree:c,teachingExperience:h,isVisiting:y,timeSlots:b}=this.state;t.preventDefault();const{instructorId:x}=this.props,r={user:{name:a,email:o}},i=new FormData;i.append("user",JSON.stringify(r)),i.append("profile_picture",s),i.append("bio",n),i.append("degree",c),i.append("expertise",JSON.stringify(p)),i.append("teaching_experience",h),i.append("is_visiting",y),i.append("time_slots",b),i.append("course_preferences",JSON.stringify(f)),i.append("gender",m);try{(await N.patch(`/api/instructors/profile/${x}/`,i,{headers:{"Content-Type":"multipart/form-data"}})).status===200?v("info","Profile Updated Successfully",!0):res.status===204&&(DELETED,v("error","Profile Deleted Successfully",!0))}catch(g){v("warn","Profile Update Failed",!0),console.log("Profile Update Error: "+g)}});d(this,"handleFileUpload",t=>{const s=t.target.files[0];if(s){const a=new FileReader;a.onloadend=()=>{this.setState({profilePicture:a.result})},console.log(this.state.profilePicture),console.log(s),a.readAsDataURL(s)}});d(this,"handleRemoveImage",()=>{this.setState({profilePicture:""}),this.fileInputRef.current&&(this.fileInputRef.current.value="")});d(this,"handleCourseChange",t=>{const{selectedCourses:s}=this.state,a=s.includes(t)?s.filter(o=>o!==t):[...s,t];this.setState({selectedCourses:a})});d(this,"handleGenderChange",t=>{this.setState({gender:String(t.target.value).toSentenceCase()})});d(this,"handleExpertiseChange",(t,s)=>{const a=[...this.state.expertise];a[t]=s,this.setState({expertise:a})});d(this,"addExpertiseField",()=>{this.setState({expertise:[...this.state.expertise,""]})});d(this,"removeExpertiseField",t=>{const s=this.state.expertise.filter((a,o)=>o!==t);this.setState({expertise:s})});d(this,"renderCoursePreferences",()=>{const{loadingCourses:t,errorLoadingCourses:s,courseList:a,selectedCourses:o}=this.state;return t?e.jsx("p",{className:"text-pretty text-amber-600 mix-blend-multiply transition-colors duration-300 animate-bounce",children:"Loading courses..."}):s||a.length===0?e.jsx("p",{className:"text-red-500",children:"Error loading courses. Please try again."}):a.map(n=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",value:n.name,checked:o.includes(n.name),onChange:()=>this.handleCourseChange(n.name),className:"mr-2"}),e.jsx("label",{children:n.name})]},n.id))});this.state={profilePicture:t.profilePicture||"",name:t.name||"",email:t.email||"",bio:t.bio||"",selectedCourses:t.selectedCourses||[],gender:t.gender||"",expertise:t.expertise||[],degree:t.degree||"",teachingExperience:t.teachingExperience||"",isVisiting:t.isVisiting||!1,timeSlots:t.timeSlots||"",genderValues:{male:"Male",female:"Female"},courseList:t.courseList||[],loadingCourses:t.loadingCourses||!1,errorLoadingCourses:t.errorLoadingCourses||!1},this.fileInputRef=L.createRef()}async componentDidMount(){document.title="Update Instructor Profile",await this.fetchCoursesList()}render(){const{profilePicture:t,name:s,email:a,bio:o,gender:n,expertise:f,degree:m,teachingExperience:p,genderValues:c,isVisiting:h,timeSlots:y,loadingCourses:b,errorLoadingCourses:x}=this.state;return e.jsxs("form",{onSubmit:this.handleSubmit,className:"max-w-4xl mx-auto p-8 bg-gradient-to-br from-blue-50 via-white to-blue-100 dark:from-gray-800 dark:via-gray-900 dark:to-gray-800 shadow-lg rounded-lg",children:[e.jsx("h1",{className:"text-3xl font-bold text-blue-700 dark:text-white text-center mb-8",children:"Instructor Profile Form"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-lg font-semibold mb-2 text-blue-600 dark:text-gray-300",children:"Profile Picture:"}),e.jsx("input",{type:"file",accept:"image/*",onChange:this.handleFileUpload,ref:this.fileInputRef,className:"w-full border border-blue-300 dark:border-gray-600 p-2 rounded-lg focus:ring focus:ring-blue-200 dark:focus:ring-gray-700 custom-file-input transition duration-300 ease-in-out transform hover:scale-105 dark:text-cyan-200 cursor-pointer"}),t&&e.jsxs("div",{className:"mt-4 flex justify-center items-center",children:[e.jsx("img",{src:t,alt:"Profile Preview",className:"w-32 h-32 object-cover rounded-full border-2 border-blue-500 dark:border-gray-500"}),e.jsx("button",{type:"button",onClick:this.handleRemoveImage,className:"ml-4 bg-red-500 text-white py-1 px-2 rounded hover:bg-red-600",children:"Remove"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-lg font-semibold mb-2 text-blue-600 dark:text-gray-300",children:"Name:"}),e.jsx("input",{type:"text",value:s,onChange:r=>this.setState({name:r.target.value}),className:"w-full border border-blue-300 dark:border-gray-600 p-2 rounded-lg focus:ring focus:ring-blue-200 dark:focus:ring-gray-700"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-lg font-semibold mb-2 text-blue-600 dark:text-gray-300",children:"Email:"}),e.jsx("input",{type:"email",value:a,onChange:r=>this.setState({email:r.target.value}),className:"w-full border border-blue-300 dark:border-gray-600 p-2 rounded-lg focus:ring focus:ring-blue-200 dark:focus:ring-gray-700"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-lg font-semibold mb-2 text-blue-600 dark:text-gray-300",children:"Bio:"}),e.jsx("textarea",{value:o,onChange:r=>this.setState({bio:r.target.value}),className:"w-full border border-blue-300 dark:border-gray-600 p-2 rounded-lg focus:ring focus:ring-blue-200 dark:focus:ring-gray-700"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-lg font-semibold mb-2 text-blue-600 dark:text-gray-300",children:"Degree:"}),e.jsxs("select",{value:m,onChange:r=>this.setState({degree:r.target.value}),className:"w-full border border-blue-300 dark:border-gray-600 p-2 rounded-lg focus:ring focus:ring-blue-200 dark:focus:ring-gray-700",children:[e.jsx("option",{value:"",children:"Select Degree"}),e.jsx("option",{value:"Bachelors",children:"Bachelors"}),e.jsx("option",{value:"Masters",children:"Masters"}),e.jsx("option",{value:"PhD",children:"PhD"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-lg font-semibold mb-2 text-blue-600 dark:text-gray-300",children:"Teaching Experience (in years):"}),e.jsx("input",{type:"number",min:0,value:p,onChange:r=>this.setState({teachingExperience:r.target.value}),placeholder:"Enter years of teaching experience",className:"w-full border border-blue-300 dark:border-gray-600 p-2 rounded-lg focus:ring focus:ring-blue-200 dark:focus:ring-gray-700"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-lg font-semibold mb-2 text-blue-600 dark:text-gray-300",children:"Teaching Type:"}),e.jsxs("select",{value:h?"Visiting":"Permanent",onChange:r=>this.setState({isVisiting:r.target.value==="Visiting"}),className:"w-full border border-blue-300 dark:border-gray-600 p-2 rounded-lg focus:ring focus:ring-blue-200 dark:focus:ring-gray-700",children:[e.jsx("option",{value:"Permanent",children:"Permanent"}),e.jsx("option",{value:"Visiting",children:"Visiting"})]})]}),h&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-lg font-semibold mb-2 text-blue-600 dark:text-gray-300",children:"Available Time Slots:"}),e.jsx("input",{type:"text",value:y,onChange:r=>this.setState({timeSlots:r.target.value}),placeholder:"Enter your available time slots",required:!0,className:"w-full border border-blue-300 dark:border-gray-600 p-2 rounded-lg focus:ring focus:ring-blue-200 dark:focus:ring-gray-700"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("label",{className:"block text-lg font-semibold mb-2 text-blue-600 dark:text-gray-300",children:"Course Preferences:"}),e.jsx("button",{type:"button",className:"mr-4 p-0 hover:shadow-inner",title:b||x?"Reload Course Fetching":"Refetch Courses",onClick:async()=>await this.fetchCoursesList(),children:e.jsx(C.ReloadStatusCircles,{condition:b||x||courseList.length===0})})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-scroll bg-sky-300 dark:bg-yellow-200 p-3",children:this.renderCoursePreferences()})]}),e.jsxs("div",{className:"mb-6 dark:text-cyan-50",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-blue-600 dark:text-gray-300",children:"Gender"}),e.jsxs("label",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"radio",value:c.male,checked:n===c.male,onChange:this.handleGenderChange,className:"mr-2"}),"Male"]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",value:c.female,checked:n===c.female,onChange:this.handleGenderChange,className:"mr-2"}),"Female"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-blue-600 dark:text-gray-300",children:"Expertise"}),f.map((r,i)=>e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"text",value:r,onChange:g=>this.handleExpertiseChange(i,g.target.value),className:"mr-2 p-1 border rounded bg-lime-100 dark:bg-slate-300 text-amber-950"}),e.jsx("button",{type:"button",onClick:()=>this.removeExpertiseField(i),className:"bg-red-500 text-white py-1 px-2 rounded hover:bg-red-600",children:"Remove"})]},i)),e.jsx("button",{type:"button",onClick:this.addExpertiseField,className:"bg-green-500 text-white py-1 px-2 rounded hover:bg-green-600",children:"Add Expertise"})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"submit",className:"w-10/12 bg-blue-600 dark:bg-indigo-500 text-white py-3 mt-16 rounded-lg hover:bg-blue-700 dark:hover:bg-gray-800 transition-all font-bold",children:"Adapt Changes"})})]})}}export{F as default};
