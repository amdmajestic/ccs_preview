var f=Object.defineProperty;var k=(d,l,r)=>l in d?f(d,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):d[l]=r;var b=(d,l,r)=>k(d,typeof l!="symbol"?l+"":l,r);import{r as S,a as C,j as e,b as w,F as A}from"./index-9Ll77M0r.js";class E extends S.Component{constructor(r){super(r);b(this,"getUniqueSemesters",r=>{const a=r.map(s=>s.lec_class_id.class_semester_id.id);return[...new Set(a)].sort()});b(this,"getUniqueSections",r=>{const a=r.map(s=>s.lec_class_id.class_section_id.name);return[...new Set(a)].sort()});b(this,"renderTables",()=>{const{hec_rev_crc:r,department:a,season:n,batch:s,lectures:x}=this.state;return this.getUniqueSemesters(x).map((h,g)=>{let u=0;const i=x.filter(o=>o.lec_class_id.class_semester_id.id===h);if(i){const o=this.getUniqueSections(i),p=i.filter(t=>t.lec_class_id.class_section_id.name===o[0]);return e.jsx("div",{className:"mb-16",children:e.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:e.jsxs("table",{className:"table-auto min-w-full border border-collapse border-black font-sans font-normal max-sm:text-xs sm:text-sm md:text-md lg:text-lg whitespace-nowrap",children:[e.jsxs("thead",{className:"bg-sky-400 font-bold",children:[e.jsx("tr",{children:e.jsx("th",{style:{fontFamily:"serif"},colSpan:8,className:"border border-black py-1 font-extrabold max-sm:text-lg sm:text-xl md:text-2xl lg:text-3xl",children:`${a.toUpperCase()}-${h} (${n.toSentenceCase()}-${s}) Batch`})}),r&&e.jsx("tr",{children:e.jsxs("th",{colSpan:8,className:"border border-black font-thin font-mono",children:["(",r,")"]})}),e.jsxs("tr",{children:[e.jsx("th",{colSpan:4,className:"border border-black font-bold",children:"COURSE DETAILS"}),e.jsx("th",{colSpan:4,className:"border border-black font-bold",children:"COURSE INSTRUCTORS"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"border border-black font-semibold bg-gray-400",children:"Course"}),e.jsx("th",{className:"border border-black font-semibold bg-gray-400",children:"Courses"}),e.jsx("th",{className:"border border-black font-semibold bg-gray-400",children:"Credit"}),e.jsx("th",{className:"border border-black font-semibold bg-gray-400",children:"Pre-requisite"}),e.jsx("th",{className:"border border-black font-semibold bg-gray-400",children:"Course"}),e.jsx("th",{colSpan:o.length,className:"border border-black font-semibold bg-gray-400",children:"Section"})]}),e.jsxs("tr",{children:[e.jsx("th",{className:"border border-black font-semibold bg-gray-400",children:"Codes"}),e.jsx("th",{className:"border border-black font-semibold bg-gray-400",children:"Title"}),e.jsx("th",{className:"border border-black font-semibold bg-gray-400",children:"Hrs"}),e.jsx("th",{className:"border border-black font-semibold bg-gray-400"}),e.jsx("th",{className:"border border-black font-semibold bg-gray-400",children:"Coordinator"}),o.map((t,m)=>e.jsx("th",{className:"border border-black font-semibold bg-gray-400",children:t},m))]})]}),e.jsxs("tbody",{children:[p&&p.map((t,m)=>{var j;return u+=t.lec_course_id.credit_hours,e.jsxs("tr",{className:t.lec_instr_id===null?"bg-red-200":"bg-green-100",children:[e.jsx("td",{className:"border border-black px-4 py-2 bg-yellow-300",children:t.lec_course_id.code}),e.jsx("td",{className:"border border-black px-4 py-2 bg-yellow-300",children:t.lec_course_id.name}),e.jsx("td",{className:"border border-black px-4 py-2 text-center",children:t.lec_course_id.credit_hours}),e.jsx("td",{className:"border border-black px-4 py-2 text-center",children:"None <?op>"}),e.jsx("td",{className:"border border-black px-4 py-2 bg-gray-300",children:((j=t.lec_course_id.crs_coordinator_id)==null?void 0:j.user.name)||"N/A"}),o.map(_=>i.filter(c=>c.lec_class_id.class_section_id.name===_&&c.lec_course_id.id===t.lec_course_id.id).map((c,y)=>{var N;return e.jsx("td",{className:"border border-black px-4 py-2",children:c.lec_instr_id?c.lec_instr_id.user.name+" - "+c.lec_instr_id.taken_credit_hours+" - "+(((N=c.lec_instr_id.authority)==null?void 0:N.authority)??NaN):"No Instructor Assigned"},y)}))]},m)}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"2",className:"border border-black bg-gray-400 pl-3 p-2 font-bold",children:"Total Credits"}),e.jsx("td",{colSpan:"1",className:"border border-black p-2 text-center font-bold bg-gray-400",children:u}),e.jsx("td",{colSpan:"5",className:"border border-black p-2"})]}),g===0&&e.jsxs(e.Fragment,{children:[e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"border border-none py-4 text-center font-bold"})}),e.jsx("tr",{children:e.jsxs("td",{colSpan:"2",className:"border border-black border-t-gray-500 border-r-gray-500 px-4 py-2 bg-green-600 ",children:[" ","DeficencyCourse"]})}),e.jsxs("tr",{className:"bg-green-100",children:[e.jsx("td",{className:"border border-black px-4 py-2 bg-yellow-300",children:"MTH0001"}),e.jsx("td",{className:"border border-black px-4 py-2 bg-yellow-300",children:"Foundation Math-I"}),e.jsx("td",{className:"border border-black px-4 py-2 text-center",children:"3"}),e.jsx("td",{className:"border border-black px-4 py-2 text-center",children:"None"}),e.jsx("td",{className:"border border-black bg-gray-300 px-4 py-2 text-center"}),e.jsx("td",{colSpan:o.length,className:"border border-black px-4 py-2 bg-green-100",children:"Ms. Asma Parveen"})]})]})]})]})})},g)}})});this.state={lectures:[],loading:null,department:"bsse",season:"fall",batch:"2024",hec_rev_crc:null}}async componentDidMount(){document.title="Course Allocation",this.setState({hec_rev_crc:"HEC Revised Curriculum 2023"}),await this.initCourseAllocation()}async initCourseAllocation(){this.setState({loading:!0}),await C.get("/course_allocation/lectures/").then(r=>{this.setState({lectures:r.data,loading:!1})}).catch(r=>{console.error("Error fetching lectures data:",r),this.setState({loading:!1})})}render(){const{season:r,batch:a,lectures:n,loading:s}=this.state;return e.jsxs(e.Fragment,{children:[n.length!==0&&e.jsxs("div",{className:"px-5 flex flex-col font-bold dark:text-white",children:[e.jsxs("span",{className:"text-center text-xl underline py-3",children:["Course Offering - ",`${r.toSentenceCase()} ${a}`]}),e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsx("span",{className:"text-left lg:text-sm py-2",children:"Ver 1.0"}),e.jsx("button",{type:"button",title:s?"":"Click to Re-render Course Allocation table(s)",className:s?"cursor-default":"",onClick:async()=>{s||await this.initCourseAllocation()},children:e.jsx(w.ReloadStatusCircles,{condition:s})})]})]}),e.jsx("div",{className:"p-4 bg-grey-100 border border-sky-50 mt-2 min-h-screen",children:s?e.jsxs("div",{children:[e.jsx("p",{className:"text-center text-blue-500 mb-5 scale-125",children:"Loading..."}),e.jsx(A,{className:"loader m-auto scale-150 text-indigo-500"})]}):n.length===0?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-500 mb-3",children:"No Course Allocation Schedule Created Yet!"}),e.jsx("button",{onClick:async()=>await this.initCourseAllocation(),className:"border border-blue-700 font-mono dark:bg-sky-400 hover:dark:bg-sky-700 p-2 rounded-lg hover:bg-blue-700 hover:text-gray-200 hover:scale-110",children:"Click to Try Again!"})]}):this.renderTables()})]})}}export{E as default};
