var h=Object.defineProperty;var x=(d,o,a)=>o in d?h(d,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):d[o]=a;var c=(d,o,a)=>x(d,typeof o!="symbol"?o+"":o,a);import{r as b,a as p,j as e}from"./index-CHdPP69v.js";class k extends b.Component{constructor(a){super(a);c(this,"handleApiCall",async(a,s,r)=>{var n,l,u,i;if(this.state.loading)alert("Wait: A request is already in process.");else{this.setState({loading:!0});try{const t=await p({method:s,url:a,data:r});if(t.status===200){const m=await t.data;this.setState({apiResponse:{state:"success",response:m}})}else{const m=await t.statusText;this.setState({apiResponse:{state:"failed",response:m}})}}catch(t){console.error("Error calling API:",t),this.setState({apiResponse:{state:"error",response:{reason:((l=(n=t==null?void 0:t.response)==null?void 0:n.data)==null?void 0:l.error)??((i=(u=t==null?void 0:t.response)==null?void 0:u.data)==null?void 0:i.detail)??"<Unknown>",message:t==null?void 0:t.message}}})}finally{this.setState({loading:!1})}}});c(this,"handleOnclickFeedDataBtn",a=>{document.querySelector(`#${a}`).showModal()});c(this,"handleFormSubmit",(a,s)=>{if(a.preventDefault(),Object.values(this.state.formData).some(r=>!r)){this.setState({error:"Please fill in all fields."});return}this.setState({error:""}),this.closeDialog(s)});c(this,"handleInputChange",(a,s)=>{const r={...this.state.formData,[s]:a.target.value};this.setState({formData:r})});c(this,"closeDialog",a=>{document.querySelector(`#${a}`).close()});this.state={apiResponse:null,loading:!1,formData:{},formError:"",instructorId:a.args.instructorId}}render(){this.state;const a=[{api_url:"/api/feed/factory/",method:"POST",arguments:["value1","value2"],button_name:"Feed Factory Backend Data to PGSQL"},{api_url:"/course_allocation/instructors/",method:"GET",arguments:[],button_name:"View Instructors"},{api_url:"/course_allocation/courses/",method:"GET",arguments:[],button_name:"View Courses"},{api_url:"/course_allocation/classes/",method:"GET",arguments:[],button_name:"View Classes"},{api_url:"/course_allocation/lectures/",method:"GET",arguments:[],button_name:"View Lectures"},{api_url:"/course_allocation/allocate/",method:"POST",arguments:[],button_name:"Allocate a Course"},{api_url:"/course_allocation/allocate_all_courses/",method:"POST",arguments:[],button_name:"Allocate All Courses"}],{formError:s,loading:r,apiResponse:n}=this.state;return e.jsxs("div",{className:"max-w-4xl mx-auto p-8 bg-gradient-to-br from-blue-50 via-white to-blue-100 dark:from-gray-800 dark:via-gray-900 dark:to-gray-800 shadow-lg rounded-lg",children:[e.jsx("h1",{className:"text-3xl font-bold text-blue-700 dark:text-white text-center mb-8",children:"API Button Table"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full table-auto bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-600 dark:bg-indigo-500 text-white",children:[e.jsx("th",{className:"p-4 text-left",children:"Target Function"}),e.jsx("th",{className:"p-4 text-left",children:"API Method"}),e.jsx("th",{colSpan:2,className:"p-4 text-center",children:"Action"})]})}),e.jsx("tbody",{children:a.map((l,u)=>{const i=`feed-parms-${u}`;return e.jsxs("tr",{className:"border-b border-blue-200 dark:border-gray-600",children:[e.jsx("td",{className:"p-4 text-gray-800 dark:text-gray-200",children:l.button_name}),e.jsx("td",{className:"p-4 text-gray-800 dark:text-gray-200",children:l.method}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-2",children:[e.jsx("button",{onClick:async()=>await this.handleApiCall(l.api_url,l.method,l.arguments),className:"bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 dark:bg-indigo-500 dark:hover:bg-indigo-600",children:"Call API"}),l.arguments.length!==0&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>this.handleOnclickFeedDataBtn(i),className:"bg-blue-600 text-white mx-0 my-2 sm:mx-2 sm:my-0 py-2 px-4 rounded-lg hover:bg-blue-700 dark:bg-indigo-500 dark:hover:bg-indigo-600",children:"Feed Data"}),e.jsx("dialog",{id:i,className:"left-2.5 sm:left-1/3 md:translate-1/3 lg:translate-x-1/3 items-center content-center justify-center bg-transparent",onClick:t=>{t.target===t.currentTarget&&this.closeDialog(i)},children:e.jsx("div",{className:"p-6 rounded-lg shadow-lg bg-white dark:bg-gray-800",children:e.jsxs("form",{onSubmit:t=>this.handleFormSubmit(t,i),className:"bg-sky-50 dark:bg-slate-700 p-3 rounded-lg bg-opacity-50",children:[e.jsx("button",{type:"button",onClick:()=>this.closeDialog(i),className:"text-red-500",children:"X"}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-200",children:"Enter API Data"}),l.arguments.map((t,m)=>e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:t}),e.jsx("input",{type:"text",placeholder:`Enter ${t}`,onChange:g=>this.handleInputChange(g,t),required:!0,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-500"})]},m)),s&&e.jsx("p",{className:"text-red-500",children:s}),e.jsx("button",{type:"submit",className:"bg-green-600 text-white py-2 px-4 rounded-lg",children:"Submit"})]})})})]})]})})]},u)})})]})}),r&&e.jsx("div",{className:"mt-4 text-2xl text-pretty text-center text-blue-600 dark:text-gray-300 cursor-wait antialiased",children:"Loading Please Wait"}),n&&e.jsxs("div",{className:"relative mt-4 p-4 bg-gray-400 dark:bg-slate-800 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 dark:text-gray-400",children:"API Response:"}),r&&e.jsx("div",{style:{animationDuration:"3s",animationTimingFunction:"ease-in-out"},className:"absolute inset-0 h-full w-full bg-black bg-opacity-80 bg-blend-exclusion animate-pulse"}),e.jsx("pre",{className:"p-6 rounded-lg overflow-auto text-sm "+(n.state==="success"?" bg-green-200 dark:text-lime-50 dark:bg-green-700":n.state==="failed"?" drop-shadow-xl decoration-blue-800 text-rose-500 bg-blue-500 dark:text-rose-200 dark:bg-royal-blue":n.state==="error"&&" bg-red-300 dark:text-purple-200 dark:bg-red-900")+" "+(r&&"filter fill-neutral-900"),children:JSON.stringify(n,null,2)})]})]})}}export{k as default};
